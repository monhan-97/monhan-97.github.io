<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-NetWork/http-version" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">HTTP 版本 | 黄梦汉个人博客</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://monhan-97.github.io/docs/NetWork/http-version"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="HTTP 版本 | 黄梦汉个人博客"><meta data-rh="true" name="description" content="HTTP 1.0"><meta data-rh="true" property="og:description" content="HTTP 1.0"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://monhan-97.github.io/docs/NetWork/http-version"><link data-rh="true" rel="alternate" href="https://monhan-97.github.io/docs/NetWork/http-version" hreflang="en"><link data-rh="true" rel="alternate" href="https://monhan-97.github.io/docs/NetWork/http-version" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://5FS9YODLSF-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="黄梦汉个人博客" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.3b24e5b8.css">
<script src="/assets/js/runtime~main.0ff239ed.js" defer="defer"></script>
<script src="/assets/js/main.b17877b6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_o28z" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_jFuq"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_PHM9 themedComponent--light_jEwv"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_PHM9 themedComponent--dark_zuar"></div><b class="navbar__title text--truncate">Mohan Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/about">About</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/monhan-97/monhan-97.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink__v_C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_CNUq colorModeToggle_iZxs"><button class="clean-btn toggleButton_pDVw toggleButtonDisabled_G_ug" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_vwhA"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_ff3y"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_jc4a"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_hJ91"><div class="docsWrapper_zU3T"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_FhuX" type="button"></button><div class="docRoot_Q7SB"><aside class="theme-doc-sidebar-container docSidebarContainer_WX5F"><div class="sidebarViewport_ROlH"><div class="sidebar_R24w sidebarWithHideableNavbar_zlkV"><a tabindex="-1" class="sidebarLogo_vFqn" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_PHM9 themedComponent--light_jEwv"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_PHM9 themedComponent--dark_zuar"><b>Mohan Home</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_aAkB"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs">Prettier</a><button aria-label="Expand sidebar category &#x27;Prettier&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/flex-layout">Flex 布局</a><button aria-label="Expand sidebar category &#x27;Flex 布局&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Javascript">Javascript</a><button aria-label="Expand sidebar category &#x27;Javascript&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/computer-network">计算机网络</a><button aria-label="Collapse sidebar category &#x27;计算机网络&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/client-and-sever">客户端和服务器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/url">URL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/http-protocol">HTTP 协议</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/tcp-ip-model">五层网络模型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/cookie">cookie</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/encrypt">加密</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/jwt">JWT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/same-origin-policy">浏览器的同源策略</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/cors">跨域资源共享(CORS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/enter-url">输入 url 地址 后</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/download-file">下载文件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/cache-protocol">浏览器缓存协议</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/tcp-protocol">TCP 协议</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/performance">网络性能优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/resume-broken-download">断点下载</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/large-file-upload">大文件上传</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/domain">域名</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/dns-parse">DNS 解析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/ssl">SSL 协议</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/NetWork/http-version">HTTP 版本</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/websocket">WebSocket</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/NetWork/websocket-test">Websocket 实战</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/event-loop">事件循环</a><button aria-label="Expand sidebar category &#x27;事件循环&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/promise">Promise</a><button aria-label="Expand sidebar category &#x27;Promise&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/browser-render">浏览器渲染原理</a><button aria-label="Expand sidebar category &#x27;浏览器渲染原理&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/redux">Redux</a><button aria-label="Expand sidebar category &#x27;Redux&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/introduce">React</a><button aria-label="Expand sidebar category &#x27;React&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/setup">手写 React 源码</a><button aria-label="Expand sidebar category &#x27;手写 React 源码&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_zKAc"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_O5cR"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_xJmF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VvXM"><div class="docItemContainer_l5CM"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_uyig" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_LRYX"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/computer-network"><span itemprop="name">计算机网络</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">HTTP 版本</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_pCir theme-doc-toc-mobile tocMobile_vx2W"><button type="button" class="clean-btn tocCollapsibleButton_e33e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>HTTP 版本</h1></header>
<h2 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="http-10">HTTP 1.0<a href="#http-10" class="hash-link" aria-label="Direct link to HTTP 1.0" title="Direct link to HTTP 1.0">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="请求方法">请求方法<a href="#请求方法" class="hash-link" aria-label="Direct link to 请求方法" title="Direct link to 请求方法">​</a></h3>
<ul>
<li>只有 <code>GET</code>、 <code>POST</code>、 <code>HEAD</code>请求方法</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="无法复用连接">无法复用连接<a href="#无法复用连接" class="hash-link" aria-label="Direct link to 无法复用连接" title="Direct link to 无法复用连接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="HTTP 1.0-无法复用连接" src="/assets/images/Snipaste_2024-09-15_13-54-27-554d4a695a4c6e60127d7435621f6dbc.png" width="1218" height="1276" class="img_bwP1"></p>
<ul>
<li>每次<code>请求</code>或者<code>响应</code>都需要建立关闭一个独立的<code>TCP链接</code>。增加了网络延迟和开销。</li>
<li>不支持长连接的机制,导致频繁的<code>TCP链接</code>建立和关闭,影响性能。</li>
<li>不能充分利用宽带资源,造成带宽资源的浪费</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_bn6N alert alert--info"><div class="admonitionHeading_LuNs"><span class="admonitionIcon_nPa1"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fLhd"><p>因为<strong>TCP 协议</strong> 慢启动的特点,即一开始传输的时候数据量少,一段时间之后达到传输的峰值。
所以按照 <strong>HTTP1.0</strong> 这种传输方式,会导致大量的请求在 <strong>TCP</strong> 达到传输峰值就已经结束了。</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="队头堵塞">队头堵塞<a href="#队头堵塞" class="hash-link" aria-label="Direct link to 队头堵塞" title="Direct link to 队头堵塞">​</a></h3>
<p><img decoding="async" loading="lazy" alt="HTTP 1.0-队头堵塞" src="/assets/images/Snipaste_2024-09-15_18-29-31-96681d2e5a54741979fd9c3e819785fe.png" width="1092" height="1368" class="img_bwP1"></p>
<ul>
<li>一个 <strong>TCP 链接</strong> 不能同时处理多个请求,造成请求处理的顺序依赖于响应的完成。也就是<strong>队头堵塞</strong>的原因</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="缓存机制">缓存机制<a href="#缓存机制" class="hash-link" aria-label="Direct link to 缓存机制" title="Direct link to 缓存机制">​</a></h3>
<ul>
<li><strong>HTTP1.0</strong>缓存机制相对简单,主要通过 <code>Expires</code>实现。 缺少完善的<code>缓存机制</code>和<code>缓存策略</code>。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="http-11">HTTP 1.1<a href="#http-11" class="hash-link" aria-label="Direct link to HTTP 1.1" title="Direct link to HTTP 1.1">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="长连接">长连接<a href="#长连接" class="hash-link" aria-label="Direct link to 长连接" title="Direct link to 长连接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="HTTP 1.1-长连接" src="/assets/images/Snipaste_2024-09-15_18-48-17-4fe02c64896377fb77071cc9a5360920.png" width="978" height="1052" class="img_bwP1"></p>
<ul>
<li><strong>HTTP 1.1</strong> 默认开启<strong>长连接</strong>,</li>
<li>支持长连接,可以在一个<strong>TCP 链 接</strong>上处理多个请求/响应</li>
<li>减少 <strong>TCP 链接</strong> 频繁的创建关闭。同时减少了<code>TCP三次握手</code>和<code>四次挥手</code>的时间</li>
<li>因为<strong>TCP 协议</strong> 慢启动的特点, <strong>长连接</strong>可以充分有效的利用带宽。</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_bn6N alert alert--info"><div class="admonitionHeading_LuNs"><span class="admonitionIcon_nPa1"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fLhd"><p><strong>Connection<!-- -->:keep-alive</strong> 是为了解决<strong>HTTP 1.0</strong>不支持长连接使用的请求头。</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="缓存机制-1">缓存机制<a href="#缓存机制-1" class="hash-link" aria-label="Direct link to 缓存机制" title="Direct link to 缓存机制">​</a></h3>
<ul>
<li><strong>HTTP1.1</strong>完善了之前的缓存机制。<a href="/docs/NetWork/cache-protocol">增加了协商缓存策略</a> 。</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="请求方法-1">请求方法<a href="#请求方法-1" class="hash-link" aria-label="Direct link to 请求方法" title="Direct link to 请求方法">​</a></h3>
<ul>
<li>新增了<code>OPTIONS</code>,<code>PUT</code>,<code>DELETE</code>,<code>TRACE</code>,<code>CONNECT</code>,<code>PATCH</code>等方法。</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="管道化">管道化<a href="#管道化" class="hash-link" aria-label="Direct link to 管道化" title="Direct link to 管道化">​</a></h3>
<p><img decoding="async" loading="lazy" alt="HTTP 1.1-长连接" src="/assets/images/Snipaste_2024-09-15_21-03-35-f95645ef07e85afb463841c04fd06ed6.png" width="956" height="968" class="img_bwP1"></p>
<p><strong>HTTP 1.1</strong>允许在响应到达之前发送下一个请求,这样可以大幅度缩减带宽限制时间。</p>
<ul>
<li>多个 <strong>HTTP 请求</strong>不用依赖上一个响应的完成，可以批量发送，这就解决了 HTTP 队头阻塞问题</li>
<li>但是批量发送的请求,服务器必须要按照请求到达的顺序返回。仍然没有彻底解决<strong>队头堵塞</strong>的问题</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_bn6N alert alert--info"><div class="admonitionHeading_LuNs"><span class="admonitionIcon_nPa1"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fLhd"><p>由于多个请求使用的是同一个<strong>TCP 链接</strong>,服务器必须要按照请求到达的顺序返回。</p><p>因为 <strong>HTTP</strong> 是一个无状态协议, 每个请求和响应并没有序号标识，无法将乱序的响应与请求关联起来。</p><p>除了这些管道化可能会带来一些意料之外的结果,所以现代浏览器基本都没有支持这个特性。</p></div></div>
<p>因为<strong>HTTP1.1</strong>还是存在<strong>队头堵塞</strong>的问题,我们需要对一些大量<strong>HTTP 请求</strong>的网站使用<a href="/docs/NetWork/performance">网络性能优化</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="http-2">HTTP 2<a href="#http-2" class="hash-link" aria-label="Direct link to HTTP 2" title="Direct link to HTTP 2">​</a></h2>
<p><strong>HTTP/2</strong> 是现行 <strong>HTTP 协议</strong>(HTTP/1.x)的替代,但它不是重写,<strong>HTTP 方法 / 状态码 / 语义</strong>都与 <strong>HTTP/1.1</strong> 一样。</p>
<p>从目前的情况来看，国内外一些排名靠前的站点基本都实现了 <strong>HTTP 2.0</strong> 的部署，使用 <strong>HTTP 2.0</strong>能带来 <strong>20%~60%</strong> 的效率提升。</p>
<p>可以通过这个图片直观感受下 <strong>HTTP/2</strong> 比 <strong>HTTP/1.1</strong> 到底快了多少</p>
<p><img decoding="async" loading="lazy" alt="HTTP/2和HTTP/1.x性能比较" src="/assets/images/687474703a2f2f7265736f757263652e6d757969792e636e2f696d6167652f32303231303531313035343532302e676966-c9212b8154abf1b7657b97fe15a7a7fd.gif" width="800" height="464" class="img_bwP1"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="基本概念">基本概念<a href="#基本概念" class="hash-link" aria-label="Direct link to 基本概念" title="Direct link to 基本概念">​</a></h3>
<ul>
<li><strong>帧(Frame)</strong>:通信的基本单位。一个 <strong>TCP 连接</strong>上可以有任意数量的流。</li>
<li><strong>流(Stream)</strong>: 已建立的 <strong>TCP 连接</strong>上的双向字节流，可以承载一个或多个消息。</li>
<li><strong>消息(Message)</strong>: 一个完整的 <strong>HTTP 请求</strong>或<strong>响应</strong>，由一个或多个<strong>帧(Frame)<strong>组成。特定消息的</strong>帧(Frame)<strong>在同一个</strong>流</strong>上发送，这意味着一个 HTTP 请求或响应只能在一个**流(Stream)**上发送。</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="二进制帧">二进制帧<a href="#二进制帧" class="hash-link" aria-label="Direct link to 二进制帧" title="Direct link to 二进制帧">​</a></h3>
<p><strong>HTTP/2</strong> 是如何做到「突破 <strong>HTTP/1.1</strong> 的性能限制，改进传输性能，实现低延迟和高吞吐量」的 ?</p>
<p>关键之一就是在 <strong>应用层(HTTP/2)</strong> 和 <strong>传输层(TCP or UDP)</strong> 之间增加一个二进制分帧层</p>
<p><img decoding="async" loading="lazy" alt="HTTP/2-二进制帧-1" src="/assets/images/687474703a2f2f7265736f757263652e6d757969792e636e2f696d6167652f32303231303531313037323731372e6a706567-2b43d0ea96860fe7555492ded236fed9.jpeg" width="625" height="324" class="img_bwP1"></p>
<ul>
<li><strong>HTTP/2</strong> 会将所有的传输信息分割为更小的消息和<strong>帧(frame)</strong>,并对他们采用<strong>二进制格式</strong>的编码。</li>
<li><strong>HTTP/1.x</strong>的头部信息会被封装到<strong>HEADERS</strong> 帧,对应的<strong>Request Body</strong>则封装到 <strong>DATA 帧</strong>里面。</li>
<li><strong>HTTP/2</strong> 数据分帧后,“Header+Body&quot;的报文结构就完全消失了,协议看到的只是一个个&quot;碎片”。</li>
</ul>
<p><img decoding="async" loading="lazy" alt="HTTP/2-二进制帧-2" src="/assets/images/1_OfgNL7FuDRMrPQy-xPJpsg-8568c2c19d1d2f7560f232faf471353e.webp" width="2000" height="1439" class="img_bwP1"></p>
<ul>
<li>每个数据流都以<strong>消息(Message)</strong> 的形式发送,而<strong>消息(Message)</strong> 又由一个或多个 <strong>帧(Frame)</strong> 组成。</li>
<li>多个<strong>帧(Frame)</strong> 之间可以乱序发送，根据<strong>帧(Frame)</strong> 首部的<strong>流(Stream)</strong> 标识符可以重新组装完整的<strong>消息(Message)</strong>。</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="多路复用">多路复用<a href="#多路复用" class="hash-link" aria-label="Direct link to 多路复用" title="Direct link to 多路复用">​</a></h3>
<p>在<strong>HTTP/2</strong>中,<strong>同域名</strong>下所有通信都在单个 <strong>TCP 连接</strong> 上完成, 解决了浏览器限制同一个<strong>域名</strong>下请求数量的问题。</p>
<p>规避了<strong>TCP 连接</strong>慢启动的特点,也更容易充分利用带宽资源,实现全速传输。这一特性使得 HTTP 传输性能得到极大提升。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="多工">多工<a href="#多工" class="hash-link" aria-label="Direct link to 多工" title="Direct link to 多工">​</a></h4>
<p><strong>HTTP/2</strong>中 复用 TCP 连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应，这样就避免了<strong>队头堵塞</strong>的问题。</p>
<p><img decoding="async" loading="lazy" alt="多工" src="/assets/images/687474703a2f2f7265736f757263652e6d757969792e636e2f696d6167652f32303231303531313037343132372e706e67-1ee5dba88764916dca2553340eedb14c.png" width="745" height="358" class="img_bwP1"></p>
<h4 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="优先级">优先级<a href="#优先级" class="hash-link" aria-label="Direct link to 优先级" title="Direct link to 优先级">​</a></h4>
<p>在 <strong>HTTP/2</strong> 中，每个请求都可以带一个 <code>31bit</code> 的优先值，<code>0</code>表示最高优先级,数值越大优先级越低。有了这个优先值，客户端和服务器就可以在处理不同的流时采取不同的策略，以最优的方式发送<strong>流(Stream)</strong>、<strong>消息(Message)<strong>和</strong>帧(Frame)</strong>。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="header-压缩hpack">Header 压缩(HPACK)<a href="#header-压缩hpack" class="hash-link" aria-label="Direct link to Header 压缩(HPACK)" title="Direct link to Header 压缩(HPACK)">​</a></h3>
<p>在<strong>HTTP/2</strong>之前,所有的消息头都是以字符串的形式完整传递的。实际上大部分的请求头字段有很多都是重复的,比如 <strong>Cookie</strong> 和 <strong>User Agent</strong>。</p>
<ul>
<li><strong>HTTP/2</strong>为此采用 <strong>HPACK</strong> 压缩头部,来减少消息头的体积。</li>
<li><strong>客户端</strong>和<strong>服务器</strong>共同维护一个消息头的<strong>静态表</strong>,包含常见的头部名称，以及常见的头部名称和值的组合。</li>
<li><strong>客户端</strong>和<strong>服务器</strong>维护一份相同的动态字典,可以动态的添加内容。</li>
</ul>
<p>所以我们在传输<strong>消息头</strong>的时候,先尝试从<strong>静态表</strong>或者<strong>动态表</strong>进行查询匹配,对应的索引值。</p>
<p>如果<strong>静态表</strong>或者<strong>动态表</strong> 都没有匹配到,通过 <strong>Huffman</strong> 压缩后进行传输,同时浏览器或者服务端会把它添加到自己的<strong>动态表</strong>中。</p>
<p><strong>HTTP/2</strong> 的静态字典（只截取了部分，<a href="https://httpwg.org/specs/rfc7541.html#static.table.definition" target="_blank" rel="noopener noreferrer">完整表格</a>在这里）：
<img decoding="async" loading="lazy" alt="HTTP/2-静态表" src="/assets/images/Snipaste_2024-09-16_02-18-01-c8adc462275fdc1032998fd64cc13986.png" width="1776" height="1244" class="img_bwP1"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_nYWU" id="服务器推送">服务器推送<a href="#服务器推送" class="hash-link" aria-label="Direct link to 服务器推送" title="Direct link to 服务器推送">​</a></h3>
<p><strong>HTTP/2</strong>允许在客户端没有主动请求的情况下,向客户端发送资源,服务端预先会把资源推送给服务端。</p>
<p>当客户端后续需要请求资源的时候,自动从之前推送的资源中去寻找。</p>
<p>这样就可以相对减少一点延迟时间。当然在浏览器兼容的情况下也可以使用 <strong>prefetch</strong> 。</p>
<div class="theme-admonition theme-admonition-warning admonition_bn6N alert alert--warning"><div class="admonitionHeading_LuNs"><span class="admonitionIcon_nPa1"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_fLhd"><p>服务端可以主动推送，客户端也可以主动选择是否接收。</p><p>如果服务端推送的资源已经被浏览器缓存  过，浏览器可以通过发送 <code>RST_STREAM</code> 帧来拒收，另外，主动推送也遵守同源策略</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_qJqP"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-09-15T19:05:24.000Z" itemprop="dateModified">Sep 15, 2024</time></b> by <b>mohan-97</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/NetWork/ssl"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">SSL 协议</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/NetWork/websocket"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">WebSocket</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_J97v thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#http-10" class="table-of-contents__link toc-highlight">HTTP 1.0</a><ul><li><a href="#请求方法" class="table-of-contents__link toc-highlight">请求方法</a></li><li><a href="#无法复用连接" class="table-of-contents__link toc-highlight">无法复用连接</a></li><li><a href="#队头堵塞" class="table-of-contents__link toc-highlight">队头堵塞</a></li><li><a href="#缓存机制" class="table-of-contents__link toc-highlight">缓存机制</a></li></ul></li><li><a href="#http-11" class="table-of-contents__link toc-highlight">HTTP 1.1</a><ul><li><a href="#长连接" class="table-of-contents__link toc-highlight">长连接</a></li><li><a href="#缓存机制-1" class="table-of-contents__link toc-highlight">缓存机制</a></li><li><a href="#请求方法-1" class="table-of-contents__link toc-highlight">请求方法</a></li><li><a href="#管道化" class="table-of-contents__link toc-highlight">管道化</a></li></ul></li><li><a href="#http-2" class="table-of-contents__link toc-highlight">HTTP 2</a><ul><li><a href="#基本概念" class="table-of-contents__link toc-highlight">基本概念</a></li><li><a href="#二进制帧" class="table-of-contents__link toc-highlight">二进制帧</a></li><li><a href="#多路复用" class="table-of-contents__link toc-highlight">多路复用</a></li><li><a href="#header-压缩hpack" class="table-of-contents__link toc-highlight">Header 压缩(HPACK)</a></li><li><a href="#服务器推送" class="table-of-contents__link toc-highlight">服务器推送</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Docs</a></li><li class="footer__item"><a href="https://react.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn React <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink__v_C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink__v_C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li><li class="footer__item"><a href="https://github.com/monhan-97/monhan-97.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink__v_C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Mohan's Home</div></div></div></footer></div>
</body>
</html>