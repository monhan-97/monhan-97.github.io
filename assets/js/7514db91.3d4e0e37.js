"use strict";(self.webpackChunkhuangmh_blog=self.webpackChunkhuangmh_blog||[]).push([[7596],{2100:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>r,contentTitle:()=>t,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"event-loop/test-case","title":"\u7ec3\u4e60\u9898","description":"\u6c42\u8f93\u51fa\u7ed3\u679c","source":"@site/docs/event-loop/test-case.mdx","sourceDirName":"event-loop","slug":"/event-loop/test-case","permalink":"/docs/event-loop/test-case","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"mohan-97","lastUpdatedAt":1692026807000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u4efb\u52a1\u4f18\u5148\u7ea7","permalink":"/docs/event-loop/task-priority"},"next":{"title":"Promise","permalink":"/docs/promise"}}');var c=o(5105),l=o(3881);const i={},t="\u7ec3\u4e60\u9898",r={},a=[{value:"\u6c42\u8f93\u51fa\u7ed3\u679c",id:"\u6c42\u8f93\u51fa\u7ed3\u679c",level:2},{value:"setTimeout \u548c Promise \u7684\u6267\u884c\u987a\u5e8f",id:"settimeout-\u548c-promise-\u7684\u6267\u884c\u987a\u5e8f",level:2},{value:"setTimeout \u548c Promise \u7684\u6267\u884c\u987a\u5e8f",id:"settimeout-\u548c-promise-\u7684\u6267\u884c\u987a\u5e8f-1",level:2},{value:"\u6c42\u8f93\u51fa\u7ed3\u679c",id:"\u6c42\u8f93\u51fa\u7ed3\u679c-1",level:2},{value:"\u8bf7\u5199\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c",id:"\u8bf7\u5199\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c",level:2},{value:"\u5c06\u4e0a\u4e00\u9053\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\uff0c\u6c42\u8f93\u51fa",id:"\u5c06\u4e0a\u4e00\u9053\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\u6c42\u8f93\u51fa",level:2},{value:"\u5c06\u4e0a\u9762\u7684\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\uff0c\u6c42\u8f93\u51fa",id:"\u5c06\u4e0a\u9762\u7684\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\u6c42\u8f93\u51fa",level:2},{value:"\u6c42\u8f93\u51fa\u7ed3\u679c",id:"\u6c42\u8f93\u51fa\u7ed3\u679c-2",level:2},{value:"\u6c42\u8f93\u51fa\u7ed3\u679c",id:"\u6c42\u8f93\u51fa\u7ed3\u679c-3",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,l.R)(),...n.components},{Details:o}=e;return o||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"\u7ec3\u4e60\u9898",children:"\u7ec3\u4e60\u9898"})}),"\n",(0,c.jsx)(e.h2,{id:"\u6c42\u8f93\u51fa\u7ed3\u679c",children:"\u6c42\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"console.log(1);\nnew Promise((resolve, reject) => {\n  console.log(2);\n  resolve();\n}).then((res) => {\n  console.log(3);\n});\nconsole.log(4);\n"})}),"\n",(0,c.jsx)(o,{children:(0,c.jsxs)(e.p,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),"\n1,2,4,3"]})}),"\n",(0,c.jsx)(e.h2,{id:"settimeout-\u548c-promise-\u7684\u6267\u884c\u987a\u5e8f",children:"setTimeout \u548c Promise \u7684\u6267\u884c\u987a\u5e8f"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"setTimeout(function () {\n  console.log(1);\n}, 0);\n\nnew Promise(function (resolve, reject) {\n  console.log(2);\n  resolve();\n})\n  .then(function () {\n    console.log(3);\n  })\n  .then(function () {\n    console.log(4);\n  });\n\nconsole.log(6);\n"})}),"\n",(0,c.jsx)(o,{children:(0,c.jsxs)(e.p,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),"\n2,6,3,4,1"]})}),"\n",(0,c.jsx)(e.h2,{id:"settimeout-\u548c-promise-\u7684\u6267\u884c\u987a\u5e8f-1",children:"setTimeout \u548c Promise \u7684\u6267\u884c\u987a\u5e8f"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"setTimeout(function () {\n  console.log(1);\n}, 0);\n\nnew Promise(function (resolve, reject) {\n  console.log(2);\n  for (var i = 0; i < 100; i++) {\n    if (i === 10) {\n      console.log(10);\n    }\n    i == 99 && resolve();\n  }\n  console.log(3);\n}).then(function () {\n  console.log(4);\n});\nconsole.log(5);\n"})}),"\n",(0,c.jsx)(o,{children:(0,c.jsxs)(e.p,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),"\n2,10,3,5,4,1"]})}),"\n",(0,c.jsx)(e.h2,{id:"\u6c42\u8f93\u51fa\u7ed3\u679c-1",children:"\u6c42\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:'console.log("start");\nsetTimeout(() => {\n  console.log("children2");\n  Promise.resolve().then(() => {\n    console.log("children3");\n  });\n}, 0);\n\nnew Promise(function (resolve, reject) {\n  console.log("children4");\n  setTimeout(function () {\n    console.log("children5");\n    resolve("children6");\n  }, 0);\n}).then((res) => {\n  // flag\n  console.log("children7");\n  setTimeout(() => {\n    console.log(res);\n  }, 0);\n});\n'})}),"\n",(0,c.jsx)(o,{children:(0,c.jsxs)(e.p,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),"\nstart,children4,children2,children3,children5,children7,children6"]})}),"\n",(0,c.jsx)(e.h2,{id:"\u8bf7\u5199\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c",children:"\u8bf7\u5199\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:'async function async1() {\n  console.log("async1 start");\n  await async2();\n  console.log("async1 end");\n}\nasync function async2() {\n  console.log("async2");\n}\nconsole.log("script start");\nsetTimeout(function () {\n  console.log("setTimeout");\n}, 0);\nasync1();\nnew Promise((resolve) => {\n  console.log("promise1");\n  resolve();\n}).then(function () {\n  console.log("promise2");\n});\nconsole.log("script end");\n'})}),"\n",(0,c.jsxs)(o,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,c.jsx)("div",{children:" script start,async1 start,async2,promise1,script end"}),(0,c.jsx)("div",{children:"async1 end, promise2,setTimeout"})]}),"\n",(0,c.jsx)(e.h2,{id:"\u5c06\u4e0a\u4e00\u9053\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\u6c42\u8f93\u51fa",children:"\u5c06\u4e0a\u4e00\u9053\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\uff0c\u6c42\u8f93\u51fa"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:'async function async1() {\n  console.log("async1 start");\n  await async2();\n  console.log("async1 end");\n}\nasync function async2() {\n  new Promise(function (resolve) {\n    console.log("promise1");\n    resolve();\n  }).then(function () {\n    console.log("promise2");\n  });\n}\nconsole.log("script start");\nsetTimeout(function () {\n  console.log("setTimeout");\n}, 0);\nasync1();\nnew Promise(function (resolve) {\n  console.log("promise3");\n  resolve();\n}).then(function () {\n  console.log("promise4");\n});\nconsole.log("script end");\n'})}),"\n",(0,c.jsxs)(o,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,c.jsx)("div",{children:"script start,async1 start,promise1,promise3,script end"}),(0,c.jsx)("div",{children:"promise2,async1 end,promise4,setTimeout"})]}),"\n",(0,c.jsx)(e.h2,{id:"\u5c06\u4e0a\u9762\u7684\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\u6c42\u8f93\u51fa",children:"\u5c06\u4e0a\u9762\u7684\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\uff0c\u6c42\u8f93\u51fa"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:'async function async1() {\n  console.log("async1 start");\n  await async2();\n  setTimeout(function () {\n    console.log("setTimeout1");\n  }, 0);\n}\nasync function async2() {\n  setTimeout(function () {\n    console.log("setTimeout2");\n  }, 0);\n}\nconsole.log("script start");\nsetTimeout(function () {\n  console.log("setTimeout3");\n}, 0);\nasync1();\nnew Promise(function (resolve) {\n  console.log("promise1");\n  resolve();\n}).then(function () {\n  console.log("promise2");\n});\nconsole.log("script end");\n'})}),"\n",(0,c.jsxs)(o,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,c.jsx)("div",{children:"script start,async1 start,promise1,script end"}),(0,c.jsx)("div",{children:"promise2,setTimeout3,setTimeout2,setTimeout1"})]}),"\n",(0,c.jsx)(e.h2,{id:"\u6c42\u8f93\u51fa\u7ed3\u679c-2",children:"\u6c42\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:'async function async1() {\n  console.log("a");\n  await async2();\n  console.log("b");\n}\n\nasync function async2() {\n  console.log("c");\n}\n\nconsole.log("d");\nasync1();\n\nsetTimeout(() => {\n  console.log("e");\n}, 0);\n\nnew Promise((resolve, reject) => {\n  console.log("f");\n  resolve();\n}).then(() => {\n  console.log("g");\n});\n'})}),"\n",(0,c.jsxs)(o,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,c.jsx)("div",{children:"d,a,c,f,b,g,e"})]}),"\n",(0,c.jsx)(e.h2,{id:"\u6c42\u8f93\u51fa\u7ed3\u679c-3",children:"\u6c42\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:'console.log("1");\nasync function async1() {\n  console.log("2");\n  await async2();\n  console.log("3");\n}\nasync function async2() {\n  console.log("4");\n}\n\nPromise.resolve().then(function () {\n  console.log("5");\n});\n\nsetTimeout(function () {\n  console.log("6");\n  Promise.resolve().then(function () {\n    console.log("7");\n  });\n  new Promise(function (resolve) {\n    console.log("8");\n    resolve();\n  }).then(function () {\n    console.log("9");\n  });\n});\n\nasync1();\n\nnew Promise(function (resolve) {\n  console.log("10");\n  resolve();\n}).then(function () {\n  console.log("11");\n});\nconsole.log("12");\n'})}),"\n",(0,c.jsxs)(o,{children:[(0,c.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,c.jsx)("div",{children:"1,2,4,10,12,5,3,11"}),(0,c.jsx)("div",{children:"6,8,7,9"})]})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(d,{...n})}):d(n)}},3881:(n,e,o)=>{o.d(e,{R:()=>i,x:()=>t});var s=o(8101);const c={},l=s.createContext(c);function i(n){const e=s.useContext(l);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:i(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);