"use strict";(self.webpackChunkhuangmh_blog=self.webpackChunkhuangmh_blog||[]).push([[8620],{6905:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>a,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Promise/promise-api","title":"Promise API","description":"then \u65b9\u6cd5","source":"@site/docs/Promise/promise-api.mdx","sourceDirName":"Promise","slug":"/Promise/promise-api","permalink":"/docs/Promise/promise-api","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"mohan-97","lastUpdatedAt":1692532206000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Promise","permalink":"/docs/Promise/promise-standard"},"next":{"title":"Promise \u9759\u6001\u65b9\u6cd5","permalink":"/docs/Promise/static-method"}}');var o=r(3420),i=r(8906);const c={},l="Promise API",t={},d=[{value:"then \u65b9\u6cd5",id:"then-\u65b9\u6cd5",level:2},{value:"catch \u65b9\u6cd5",id:"catch-\u65b9\u6cd5",level:2},{value:"\u94fe\u5f0f\u8c03\u7528",id:"\u94fe\u5f0f\u8c03\u7528",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"promise-api",children:"Promise API"})}),"\n",(0,o.jsx)(n.h2,{id:"then-\u65b9\u6cd5",children:"then \u65b9\u6cd5"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Promise"})," \u5b9e\u4f8b\u7684 then \u65b9\u6cd5\u6700\u591a\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"Promise.prototype.then(onFulfilled, onRejected);\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u7528\u4e8e ",(0,o.jsx)(n.code,{children:"Promise"}),"\u5230 ",(0,o.jsx)(n.strong,{children:"\u5b8c\u6210\u72b6\u6001(fulfilled)"})," \u548c ",(0,o.jsx)(n.strong,{children:"\u5931\u8d25\u72b6\u6001(rejected)"})," \u60c5\u51b5\u7684\u56de\u8c03\u51fd\u6570\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:["\u5f53 ",(0,o.jsx)(n.code,{children:"Promise"})," \u7684\u72b6\u6001\u662f **\u5b8c\u6210\u72b6\u6001(fulfilled)**\u7684\u65f6\u5019 \u4f1a\u8c03\u7528 ",(0,o.jsx)(n.code,{children:"then"})," \u65b9\u6cd5\u91cc\u9762\u7684 ",(0,o.jsx)(n.code,{children:"onFulfilled"})]}),"\n",(0,o.jsxs)(n.li,{children:["\u5f53 ",(0,o.jsx)(n.code,{children:"Promise"})," \u7684\u72b6\u6001\u662f **\u5931\u8d25\u72b6\u6001(rejected)**\u7684\u65f6\u5019 \u4f1a\u8c03\u7528 ",(0,o.jsx)(n.code,{children:"then"})," \u65b9\u6cd5\u91cc\u9762\u7684 ",(0,o.jsx)(n.code,{children:"onRejected"})]}),"\n",(0,o.jsx)(n.li,{children:"then \u65b9\u6cd5\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5168\u65b0\u7684 Promise \u5bf9\u8c61,\u53ef\u4ee5\u7528\u4e8e\u94fe\u5f0f\u8c03\u7528"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"catch-\u65b9\u6cd5",children:"catch \u65b9\u6cd5"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"Promise.prototype.then(undefined, onRejected);\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u5f53 ",(0,o.jsx)(n.code,{children:"Promise"})," \u7684\u72b6\u6001\u662f **\u5931\u8d25\u72b6\u6001(rejected)**\u7684\u65f6\u5019 \u4f1a\u8c03\u7528 ",(0,o.jsx)(n.code,{children:"then"})," \u65b9\u6cd5\u91cc\u9762\u7684 ",(0,o.jsx)(n.code,{children:"onRejected"})]}),"\n",(0,o.jsxs)(n.li,{children:["\u5b9e\u9645\u4e0a ",(0,o.jsx)(n.code,{children:"catch"})," \u65b9\u6cd5\u662f ",(0,o.jsx)(n.code,{children:"Promise.prototype.then(undefined, onRejected)"})," \u7684\u4e00\u79cd\u7b80\u5199\u5f62\u5f0f\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:["Promise \u5bf9\u8c61\u7684\u9519\u8bef\u5177\u6709\u5192\u6ce1\u6027\u8d28 \u4f1a\u4e00\u76f4\u5411\u540e\u4f20\u9012 \u76f4\u5230\u88ab ",(0,o.jsx)(n.code,{children:"catch"})," \u65b9\u6cd5\u548c ",(0,o.jsx)(n.code,{children:"onRejected"})," \u6355\u83b7"]}),"\n",(0,o.jsxs)(n.li,{children:["\u4e00\u822c\u6765\u8bf4\u4e0d\u8981\u5728 ",(0,o.jsx)(n.code,{children:"then"})," \u65b9\u6cd5\u4e2d\u5b9a\u4e49 ",(0,o.jsx)(n.code,{children:"onReject"})," \u7684\u56de\u8c03\u51fd\u6570 \u800c\u662f\u5e94\u8be5\u603b\u662f\u4f7f\u7528 catch \u65b9\u6cd5\uff0c\u8fd9\u6837\u66f4\u63a5\u8fd1\u4e8e\u540c\u6b65\u7684\u5199\u6cd5\uff08try...catch\uff09\u3002"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"\u94fe\u5f0f\u8c03\u7528",children:"\u94fe\u5f0f\u8c03\u7528"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Promise",src:r(9314).A+"",width:"1538",height:"524"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"then"})," \u65b9\u6cd5\u5fc5\u5b9a\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Promise \u5bf9\u8c61, \u53ef\u4ee5\u7406\u89e3\u4e3a\u540e\u7eed\u5904\u7406\u4e5f\u662f\u4e00\u4e2a\u4efb\u52a1"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u65b0\u4efb\u52a1\u7684\u72b6\u6001\u53d6\u51b3\u4e8e\u540e\u7eed\u5904\u7406:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u82e5\u6ca1\u6709\u76f8\u5173\u7684\u6570\u636e\u5904\u7406 \u65b0\u4efb\u52a1\u7684\u72b6\u6001\u548c\u524d\u4efb\u52a1\u4e00\u81f4 \u6570\u636e\u4e3a\u524d\u4e00\u4e2a\u4efb\u52a1\u7684\u6570\u636e"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const promise = new Promise((resolve, reject) => {\r\n  console.log("promise \u6267\u884c\u4e86");\r\n  reject();\r\n});\r\n\r\nconst promise1 = promise.then(() => {\r\n  console.log("promise1 \u6267\u884c\u4e86");\r\n});\r\n\r\nsetTimeout(() => {\r\n  console.log(promise1);\r\n  // \u56e0\u4e3a \u7b2c\u4e00\u4e2a new Promise() \u6267\u884c\u4e86reject\u4e4b\u540e promise\u72b6\u6001\u53d8\u6210\u4e86 rejected\r\n  // promise1 \u6ca1\u6709\u5bf9 promise\u7684reject\u8fdb\u884c\u5904\u7406 \u6240\u4ee5promise1\u7684\u72b6\u6001\u4ecd\u7136\u8fd8\u662f rejected\r\n}, 0);\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const promise = new Promise((resolve, reject) => {\r\n  console.log("promise \u6267\u884c\u4e86");\r\n  resolve();\r\n});\r\n\r\nconst promise1 = promise.catch(() => {\r\n  console.log("promise1 \u6267\u884c\u4e86");\r\n});\r\n\r\nsetTimeout(() => {\r\n  console.log(promise1);\r\n  // \u56e0\u4e3a \u7b2c\u4e00\u4e2a new Promise() \u6267\u884c\u4e86resolve\u4e4b\u540e promise\u72b6\u6001\u53d8\u6210\u4e86 fulfilled\r\n  // promise1 \u6ca1\u6709\u5bf9 promise\u7684resolve\u8fdb\u884c\u5904\u7406 \u6240\u4ee5promise1\u7684\u72b6\u6001\u4ecd\u7136\u8fd8\u662f fulfilled\r\n}, 0);\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u82e5\u6709\u540e\u7eed\u4efb\u52a1\u5904\u7406\u4f46\u662f\u8fd8\u672a\u6267\u884c \u65b0\u7684\u4efb\u52a1\u6302\u8d77"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const promise = new Promise((resolve, reject) => {\r\n  console.log("\u5b66\u4e60");\r\n  setTimeout(() => {\r\n    resolve();\r\n  }, 2000);\r\n});\r\n\r\nconst promise1 = promise.then(() => {\r\n  console.log("\u8003\u8bd5");\r\n});\r\n\r\nsetTimeout(() => {\r\n  console.log(promise1);\r\n  // \u56e0\u4e3a \u7b2c\u4e00\u4e2a new Promise() \u9700\u8981\u7b49\u5230\u4e24\u79d2\u624d\u6267\u884cresolve\r\n  //  \u5ef6\u8fdf\u4e00\u79d2\u949f\u6253\u5370promise1 \u7684\u65f6\u5019 promise1 \u8fd8\u5904\u4e8e\u6302\u8d77\u72b6\u6001(pending)\r\n}, 1000);\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u82e5\u540e\u7eed\u4efb\u52a1\u5904\u7406\u6267\u884c\u4e86\uff0c\u5219\u540e\u7eed\u5904\u7406\u7684\u60c5\u51b5\u786e\u5b9a\u65b0\u4efb\u52a1\u7684\u72b6\u6001"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u5982\u679c\u540e\u7eed\u5904\u7406\u6267\u884c\u6210\u529f,\u65b0\u4efb\u52a1\u7684\u72b6\u6001\u4e3a\u5b8c\u6210,\u6570\u636e\u4e3a\u540e\u7eed\u5904\u7406\u7684\u8fd4\u56de\u503c"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const promise = new Promise((resolve, reject) => {\r\n  console.log("\u6211\u5728\u8003\u8bd5");\r\n  resolve();\r\n});\r\n\r\nconst promise1 = promise.then(() => {\r\n  return 100;\r\n});\r\n\r\nsetTimeout(() => {\r\n  console.log(promise1);\r\n  //  100\r\n}, 1000);\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u5982\u679c\u540e\u7eed\u5904\u7406\u6267\u884c\u9519\u8bef,\u65b0\u4efb\u52a1\u7684\u72b6\u6001\u4e3a\u5931\u8d25,\u6570\u636e\u4e3a\u5f02\u5e38\u5bf9\u8c61"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const promise = new Promise((resolve, reject) => {\r\n  reject(new Error("error"));\r\n});\r\n\r\nconst promise1 = promise.catch(() => {\r\n  throw new Error("new error"); // \u629b\u51fa\u4e00\u4e2a\u9519\u8bef\r\n});\r\n\r\nsetTimeout(() => {\r\n  console.log(promise1);\r\n  //  new error \u7684\u9519\u8bef\u4fe1\u606f\r\n}, 1000);\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u540e\u7eed\u6267\u884c\u540e\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Promise \u5bf9\u8c61, \u65b0\u4efb\u52a1\u7684\u4efb\u52a1\u72b6\u6001\u548c\u6570\u636e\u4e0e\u8be5 Promise \u5bf9\u8c61\u4e00\u81f4"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const promise = new Promise((resolve, reject) => {\r\n  reject(new Error("error"));\r\n});\r\n\r\nconst promise1 = promise\r\n  .catch(() => {\r\n    return new Promise(function (resolve, reject) {\r\n      resolve("fun");\r\n    });\r\n  })\r\n  .then((value) => {\r\n    console.log(value);\r\n  });\r\n\r\nsetTimeout(() => {\r\n  console.log(promise1);\r\n  // fun\r\n}, 1000);\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8906:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var s=r(6672);const o={},i=s.createContext(o);function c(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),s.createElement(i.Provider,{value:n},e.children)}},9314:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Snipaste_2023-08-19_16-26-12-7fe20e28d9a85953d29398e555227a44.png"}}]);