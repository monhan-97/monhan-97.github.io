"use strict";(self.webpackChunkhuangmh_blog=self.webpackChunkhuangmh_blog||[]).push([[7596],{8769:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>t,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"event-loop/test-case","title":"\u7ec3\u4e60\u9898","description":"\u6c42\u8f93\u51fa\u7ed3\u679c","source":"@site/docs/event-loop/test-case.mdx","sourceDirName":"event-loop","slug":"/event-loop/test-case","permalink":"/docs/event-loop/test-case","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"mohan-97","lastUpdatedAt":1692026807000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u4efb\u52a1\u4f18\u5148\u7ea7","permalink":"/docs/event-loop/task-priority"},"next":{"title":"Promise","permalink":"/docs/promise"}}');var s=r(3420),c=r(8906);const l={},i="\u7ec3\u4e60\u9898",t={},a=[{value:"\u6c42\u8f93\u51fa\u7ed3\u679c",id:"\u6c42\u8f93\u51fa\u7ed3\u679c",level:2},{value:"setTimeout \u548c Promise \u7684\u6267\u884c\u987a\u5e8f",id:"settimeout-\u548c-promise-\u7684\u6267\u884c\u987a\u5e8f",level:2},{value:"setTimeout \u548c Promise \u7684\u6267\u884c\u987a\u5e8f",id:"settimeout-\u548c-promise-\u7684\u6267\u884c\u987a\u5e8f-1",level:2},{value:"\u6c42\u8f93\u51fa\u7ed3\u679c",id:"\u6c42\u8f93\u51fa\u7ed3\u679c-1",level:2},{value:"\u8bf7\u5199\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c",id:"\u8bf7\u5199\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c",level:2},{value:"\u5c06\u4e0a\u4e00\u9053\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\uff0c\u6c42\u8f93\u51fa",id:"\u5c06\u4e0a\u4e00\u9053\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\u6c42\u8f93\u51fa",level:2},{value:"\u5c06\u4e0a\u9762\u7684\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\uff0c\u6c42\u8f93\u51fa",id:"\u5c06\u4e0a\u9762\u7684\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\u6c42\u8f93\u51fa",level:2},{value:"\u6c42\u8f93\u51fa\u7ed3\u679c",id:"\u6c42\u8f93\u51fa\u7ed3\u679c-2",level:2},{value:"\u6c42\u8f93\u51fa\u7ed3\u679c",id:"\u6c42\u8f93\u51fa\u7ed3\u679c-3",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...n.components},{Details:r}=e;return r||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\u7ec3\u4e60\u9898",children:"\u7ec3\u4e60\u9898"})}),"\n",(0,s.jsx)(e.h2,{id:"\u6c42\u8f93\u51fa\u7ed3\u679c",children:"\u6c42\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"console.log(1);\r\nnew Promise((resolve, reject) => {\r\n  console.log(2);\r\n  resolve();\r\n}).then((res) => {\r\n  console.log(3);\r\n});\r\nconsole.log(4);\n"})}),"\n",(0,s.jsx)(r,{children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),"\r\n1,2,4,3"]})}),"\n",(0,s.jsx)(e.h2,{id:"settimeout-\u548c-promise-\u7684\u6267\u884c\u987a\u5e8f",children:"setTimeout \u548c Promise \u7684\u6267\u884c\u987a\u5e8f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"setTimeout(function () {\r\n  console.log(1);\r\n}, 0);\r\n\r\nnew Promise(function (resolve, reject) {\r\n  console.log(2);\r\n  resolve();\r\n})\r\n  .then(function () {\r\n    console.log(3);\r\n  })\r\n  .then(function () {\r\n    console.log(4);\r\n  });\r\n\r\nconsole.log(6);\n"})}),"\n",(0,s.jsx)(r,{children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),"\r\n2,6,3,4,1"]})}),"\n",(0,s.jsx)(e.h2,{id:"settimeout-\u548c-promise-\u7684\u6267\u884c\u987a\u5e8f-1",children:"setTimeout \u548c Promise \u7684\u6267\u884c\u987a\u5e8f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"setTimeout(function () {\r\n  console.log(1);\r\n}, 0);\r\n\r\nnew Promise(function (resolve, reject) {\r\n  console.log(2);\r\n  for (var i = 0; i < 100; i++) {\r\n    if (i === 10) {\r\n      console.log(10);\r\n    }\r\n    i == 99 && resolve();\r\n  }\r\n  console.log(3);\r\n}).then(function () {\r\n  console.log(4);\r\n});\r\nconsole.log(5);\n"})}),"\n",(0,s.jsx)(r,{children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),"\r\n2,10,3,5,4,1"]})}),"\n",(0,s.jsx)(e.h2,{id:"\u6c42\u8f93\u51fa\u7ed3\u679c-1",children:"\u6c42\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'console.log("start");\r\nsetTimeout(() => {\r\n  console.log("children2");\r\n  Promise.resolve().then(() => {\r\n    console.log("children3");\r\n  });\r\n}, 0);\r\n\r\nnew Promise(function (resolve, reject) {\r\n  console.log("children4");\r\n  setTimeout(function () {\r\n    console.log("children5");\r\n    resolve("children6");\r\n  }, 0);\r\n}).then((res) => {\r\n  // flag\r\n  console.log("children7");\r\n  setTimeout(() => {\r\n    console.log(res);\r\n  }, 0);\r\n});\n'})}),"\n",(0,s.jsx)(r,{children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),"\r\nstart,children4,children2,children3,children5,children7,children6"]})}),"\n",(0,s.jsx)(e.h2,{id:"\u8bf7\u5199\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c",children:"\u8bf7\u5199\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'async function async1() {\r\n  console.log("async1 start");\r\n  await async2();\r\n  console.log("async1 end");\r\n}\r\nasync function async2() {\r\n  console.log("async2");\r\n}\r\nconsole.log("script start");\r\nsetTimeout(function () {\r\n  console.log("setTimeout");\r\n}, 0);\r\nasync1();\r\nnew Promise((resolve) => {\r\n  console.log("promise1");\r\n  resolve();\r\n}).then(function () {\r\n  console.log("promise2");\r\n});\r\nconsole.log("script end");\n'})}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,s.jsx)("div",{children:" script start,async1 start,async2,promise1,script end"}),(0,s.jsx)("div",{children:"async1 end, promise2,setTimeout"})]}),"\n",(0,s.jsx)(e.h2,{id:"\u5c06\u4e0a\u4e00\u9053\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\u6c42\u8f93\u51fa",children:"\u5c06\u4e0a\u4e00\u9053\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\uff0c\u6c42\u8f93\u51fa"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'async function async1() {\r\n  console.log("async1 start");\r\n  await async2();\r\n  console.log("async1 end");\r\n}\r\nasync function async2() {\r\n  new Promise(function (resolve) {\r\n    console.log("promise1");\r\n    resolve();\r\n  }).then(function () {\r\n    console.log("promise2");\r\n  });\r\n}\r\nconsole.log("script start");\r\nsetTimeout(function () {\r\n  console.log("setTimeout");\r\n}, 0);\r\nasync1();\r\nnew Promise(function (resolve) {\r\n  console.log("promise3");\r\n  resolve();\r\n}).then(function () {\r\n  console.log("promise4");\r\n});\r\nconsole.log("script end");\n'})}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,s.jsx)("div",{children:"script start,async1 start,promise1,promise3,script end"}),(0,s.jsx)("div",{children:"promise2,async1 end,promise4,setTimeout"})]}),"\n",(0,s.jsx)(e.h2,{id:"\u5c06\u4e0a\u9762\u7684\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\u6c42\u8f93\u51fa",children:"\u5c06\u4e0a\u9762\u7684\u9898\u76ee\u53d8\u6362\u4e00\u4e0b\uff0c\u6c42\u8f93\u51fa"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'async function async1() {\r\n  console.log("async1 start");\r\n  await async2();\r\n  setTimeout(function () {\r\n    console.log("setTimeout1");\r\n  }, 0);\r\n}\r\nasync function async2() {\r\n  setTimeout(function () {\r\n    console.log("setTimeout2");\r\n  }, 0);\r\n}\r\nconsole.log("script start");\r\nsetTimeout(function () {\r\n  console.log("setTimeout3");\r\n}, 0);\r\nasync1();\r\nnew Promise(function (resolve) {\r\n  console.log("promise1");\r\n  resolve();\r\n}).then(function () {\r\n  console.log("promise2");\r\n});\r\nconsole.log("script end");\n'})}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,s.jsx)("div",{children:"script start,async1 start,promise1,script end"}),(0,s.jsx)("div",{children:"promise2,setTimeout3,setTimeout2,setTimeout1"})]}),"\n",(0,s.jsx)(e.h2,{id:"\u6c42\u8f93\u51fa\u7ed3\u679c-2",children:"\u6c42\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'async function async1() {\r\n  console.log("a");\r\n  await async2();\r\n  console.log("b");\r\n}\r\n\r\nasync function async2() {\r\n  console.log("c");\r\n}\r\n\r\nconsole.log("d");\r\nasync1();\r\n\r\nsetTimeout(() => {\r\n  console.log("e");\r\n}, 0);\r\n\r\nnew Promise((resolve, reject) => {\r\n  console.log("f");\r\n  resolve();\r\n}).then(() => {\r\n  console.log("g");\r\n});\n'})}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,s.jsx)("div",{children:"d,a,c,f,b,g,e"})]}),"\n",(0,s.jsx)(e.h2,{id:"\u6c42\u8f93\u51fa\u7ed3\u679c-3",children:"\u6c42\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'console.log("1");\r\nasync function async1() {\r\n  console.log("2");\r\n  await async2();\r\n  console.log("3");\r\n}\r\nasync function async2() {\r\n  console.log("4");\r\n}\r\n\r\nPromise.resolve().then(function () {\r\n  console.log("5");\r\n});\r\n\r\nsetTimeout(function () {\r\n  console.log("6");\r\n  Promise.resolve().then(function () {\r\n    console.log("7");\r\n  });\r\n  new Promise(function (resolve) {\r\n    console.log("8");\r\n    resolve();\r\n  }).then(function () {\r\n    console.log("9");\r\n  });\r\n});\r\n\r\nasync1();\r\n\r\nnew Promise(function (resolve) {\r\n  console.log("10");\r\n  resolve();\r\n}).then(function () {\r\n  console.log("11");\r\n});\r\nconsole.log("12");\n'})}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"\u67e5\u770b\u7b54\u6848"}),(0,s.jsx)("div",{children:"1,2,4,10,12,5,3,11"}),(0,s.jsx)("div",{children:"6,8,7,9"})]})]})}function u(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8906:(n,e,r)=>{r.d(e,{R:()=>l,x:()=>i});var o=r(6672);const s={},c=o.createContext(s);function l(n){const e=o.useContext(c);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),o.createElement(c.Provider,{value:e},n.children)}}}]);