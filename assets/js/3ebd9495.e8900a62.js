"use strict";(self.webpackChunkhuangmh_blog=self.webpackChunkhuangmh_blog||[]).push([[8128],{9357:(e,c,n)=>{n.r(c),n.d(c,{assets:()=>o,contentTitle:()=>i,default:()=>x,frontMatter:()=>l,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"NetWork/websocket","title":"WebSocket","description":"\u7b80\u4ecb","source":"@site/docs/NetWork/websocket.mdx","sourceDirName":"NetWork","slug":"/NetWork/websocket","permalink":"/docs/NetWork/websocket","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"mohan-97","lastUpdatedAt":1726594816000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"HTTP \u7248\u672c","permalink":"/docs/NetWork/http-version"},"next":{"title":"Websocket \u5b9e\u6218","permalink":"/docs/NetWork/websocket-test"}}');var d=n(3274),r=n(8438);const l={},i="WebSocket",o={},t=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u65e7\u65b9\u6848",id:"\u65e7\u65b9\u6848",level:2},{value:"\u77ed\u8f6e\u8be2",id:"\u77ed\u8f6e\u8be2",level:3},{value:"\u957f\u8f6e\u8be2",id:"\u957f\u8f6e\u8be2",level:3},{value:"WebSocket \u63e1\u624b",id:"websocket-\u63e1\u624b",level:2},{value:"\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42",id:"\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42",level:3},{value:"\u670d\u52a1\u7aef\u54cd\u5e94",id:"\u670d\u52a1\u7aef\u54cd\u5e94",level:3},{value:"\u5efa\u7acb\u8fde\u63a5",id:"\u5efa\u7acb\u8fde\u63a5",level:3}];function h(e){const c={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.header,{children:(0,d.jsx)(c.h1,{id:"websocket",children:"WebSocket"})}),"\n",(0,d.jsx)(c.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,d.jsx)(c.p,{children:(0,d.jsx)(c.img,{alt:"WebSocket\u534f\u8bae",src:n(4065).A+"",width:"1148",height:"1042"})}),"\n",(0,d.jsxs)(c.ul,{children:["\n",(0,d.jsxs)(c.li,{children:[(0,d.jsx)(c.code,{children:"WebSocket"})," \u662f\u57fa\u4e8e",(0,d.jsx)(c.code,{children:"TCP\u534f\u8bae"}),"\u4e4b\u4e0a,\u5229\u7528\u7684\u662f",(0,d.jsx)(c.code,{children:"TCP\u534f\u8bae"}),"\u5168\u53cc\u5de5\u901a\u4fe1\u7684\u80fd\u529b\u3002"]}),"\n",(0,d.jsxs)(c.li,{children:["\u5728",(0,d.jsx)(c.code,{children:"WebSocket"}),"\u4e2d",(0,d.jsx)(c.code,{children:"\u5ba2\u6237\u7aef"}),"\u548c",(0,d.jsx)(c.code,{children:"\u6d4f\u89c8\u5668"}),"\u53ea\u9700\u8981\u5b8c\u6210\u4e00\u6b21",(0,d.jsx)(c.code,{children:" HTTP \u63e1\u624b"}),", \u670d\u52a1\u7aef\u5c31\u80fd\u4e00\u76f4\u4e0e\u5ba2\u6237\u7aef\u4fdd\u6301\u901a\u8baf\uff0c\u76f4\u5230\u5173\u95ed\u8fde\u63a5\u3002"]}),"\n"]}),"\n",(0,d.jsx)(c.h2,{id:"\u65e7\u65b9\u6848",children:"\u65e7\u65b9\u6848"}),"\n",(0,d.jsx)(c.h3,{id:"\u77ed\u8f6e\u8be2",children:"\u77ed\u8f6e\u8be2"}),"\n",(0,d.jsxs)(c.ul,{children:["\n",(0,d.jsxs)(c.li,{children:[(0,d.jsx)(c.code,{children:"\u5ba2\u6237\u7aef"}),"\u5b9a\u65f6\u5411",(0,d.jsx)(c.code,{children:"\u670d\u52a1\u5668"}),"\u53d1\u9001\u8bf7\u6c42\uff0c\u4ee5\u68c0\u67e5\u662f\u5426\u6709\u65b0\u7684\u6570\u636e\u3002"]}),"\n",(0,d.jsxs)(c.li,{children:["\u8bf7\u6c42\u8fd4\u56de\u540e\uff0c",(0,d.jsx)(c.code,{children:"\u5ba2\u6237\u7aef"}),"\u4f1a\u518d\u6b21\u53d1\u8d77\u8bf7\u6c42\u3002"]}),"\n",(0,d.jsx)(c.li,{children:"\u9002\u7528\u4e8e\u66f4\u65b0\u4e0d\u9891\u7e41\u7684\u573a\u666f\u3002"}),"\n",(0,d.jsx)(c.li,{children:"\u53ef\u80fd\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u7f51\u7edc\u6d41\u91cf\u548c\u5ef6\u8fdf\uff0c\u56e0\u4e3a\u8bf7\u6c42\u95f4\u9694\u53ef\u80fd\u4e0d\u603b\u662f\u80fd\u7cbe\u786e\u5339\u914d\u6570\u636e\u66f4\u65b0\u7684\u9891\u7387\u3002"}),"\n"]}),"\n",(0,d.jsx)(c.h3,{id:"\u957f\u8f6e\u8be2",children:"\u957f\u8f6e\u8be2"}),"\n",(0,d.jsxs)(c.ul,{children:["\n",(0,d.jsxs)(c.li,{children:[(0,d.jsx)(c.code,{children:"\u5ba2\u6237\u7aef"}),"\u5411",(0,d.jsx)(c.code,{children:"\u670d\u52a1\u5668"}),"\u53d1\u9001\u8bf7\u6c42\uff0c",(0,d.jsx)(c.code,{children:"\u670d\u52a1\u5668"}),"\u5728\u6709\u65b0\u6570\u636e\u6216\u8d85\u65f6\u4e4b\u524d",(0,d.jsx)(c.strong,{children:"\u4e0d\u4f1a\u7acb\u5373\u54cd\u5e94"}),"\u3002"]}),"\n",(0,d.jsxs)(c.li,{children:["\u5f53\u6709\u65b0\u6570\u636e\u65f6\uff0c\u670d\u52a1\u5668\u8fd4\u56de\u54cd\u5e94\uff0c",(0,d.jsx)(c.code,{children:"\u5ba2\u6237\u7aef"}),"\u518d\u53d1\u9001",(0,d.jsx)(c.strong,{children:"\u65b0\u8bf7\u6c42"}),"\u3002"]}),"\n",(0,d.jsxs)(c.li,{children:["\u9002\u7528\u4e8e\u9700\u8981\u5b9e\u65f6\u66f4\u65b0\u7684\u573a\u666f\uff0c\u5982",(0,d.jsx)(c.code,{children:"\u804a\u5929\u5e94\u7528"}),"\u6216",(0,d.jsx)(c.code,{children:"\u5b9e\u65f6\u901a\u77e5"}),"\u3002"]}),"\n",(0,d.jsxs)(c.li,{children:["\u53ef\u4ee5\u51cf\u5c11",(0,d.jsx)(c.code,{children:"\u8bf7\u6c42\u6b21\u6570"}),", \u4f46\u662f\u670d\u52a1\u7aef\u7f16\u5199\u6bd4\u8f83\u590d\u6742\u3002"]}),"\n"]}),"\n",(0,d.jsx)(c.h2,{id:"websocket-\u63e1\u624b",children:"WebSocket \u63e1\u624b"}),"\n",(0,d.jsx)(c.h3,{id:"\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42",children:"\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42"}),"\n",(0,d.jsxs)(c.p,{children:["\u5ba2\u6237\u7aef\u901a\u8fc7 ",(0,d.jsx)(c.strong,{children:"HTTP"})," \u53d1\u8d77 ",(0,d.jsx)(c.strong,{children:"WebSocket \u63e1\u624b"})," \u8bf7\u6c42,\u4f7f\u7528",(0,d.jsx)(c.code,{children:"Upgrade"}),"\u5934\u90e8\u5c06\u534f\u8bae\u5347\u7ea7\u5230",(0,d.jsx)(c.strong,{children:"WebSocket"})]}),"\n",(0,d.jsx)(c.pre,{children:(0,d.jsx)(c.code,{className:"language-javascript",children:"GET /chat HTTP/1.1\r\nHost: example.com\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\r\nSec-WebSocket-Version: 13\n"})}),"\n",(0,d.jsxs)(c.ul,{children:["\n",(0,d.jsxs)(c.li,{children:[(0,d.jsx)(c.code,{children:"Upgrade"}),"\u548c",(0,d.jsx)(c.code,{children:"Connection"}),"\u5934\u90e8\u7528\u4e8e\u544a\u8bc9",(0,d.jsx)(c.code,{children:"\u670d\u52a1\u5668"}),",",(0,d.jsx)(c.code,{children:"\u5ba2\u6237\u7aef"}),"\u5e0c\u671b\u5347\u7ea7\u534f\u8bae\u3002"]}),"\n",(0,d.jsxs)(c.li,{children:[(0,d.jsx)(c.code,{children:"Sec-WebSocket-Key"})," \u662f\u4e00\u4e2a\u968f\u673a\u751f\u6210\u7684 Base64 \u7f16\u7801\u5b57\u7b26\u4e32\uff0c\u7528\u4e8e\u751f\u6210\u54cd\u5e94\u7684 ",(0,d.jsx)(c.code,{children:"Sec-WebSocket-Accept"}),"\u3002"]}),"\n",(0,d.jsxs)(c.li,{children:[(0,d.jsx)(c.code,{children:"Sec-WebSocket-Version"})," \u8868\u793a ",(0,d.jsx)(c.code,{children:"WebSocket"})," \u7684\u534f\u8bae\u7248\u672c\u3002"]}),"\n"]}),"\n",(0,d.jsx)(c.h3,{id:"\u670d\u52a1\u7aef\u54cd\u5e94",children:"\u670d\u52a1\u7aef\u54cd\u5e94"}),"\n",(0,d.jsxs)(c.p,{children:[(0,d.jsx)(c.code,{children:"\u670d\u52a1\u5668"}),"\u63a5\u53d7\u5347\u7ea7\u8bf7\u6c42\u5e76\u56de\u5e94",(0,d.jsx)(c.code,{children:"\u5ba2\u6237\u7aef"})]}),"\n",(0,d.jsx)(c.pre,{children:(0,d.jsx)(c.code,{className:"language-javascript",children:"HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: <calculated-response-key>\n"})}),"\n",(0,d.jsxs)(c.ul,{children:["\n",(0,d.jsxs)(c.li,{children:[(0,d.jsx)(c.code,{children:"101 Switching Protocols"})," \u72b6\u6001\u7801\u8868\u793a\u534f\u8bae\u5df2\u6210\u529f\u5347\u7ea7\u3002"]}),"\n",(0,d.jsxs)(c.li,{children:[(0,d.jsx)(c.code,{children:"Sec-WebSocket-Accept"})," \u662f\u670d\u52a1\u5668\u57fa\u4e8e\u5ba2\u6237\u7aef\u63d0\u4f9b\u7684 ",(0,d.jsx)(c.code,{children:"Sec-WebSocket-Key"})," \u8ba1\u7b97\u5f97\u51fa\u7684\u503c\u3002"]}),"\n"]}),"\n",(0,d.jsx)(c.h3,{id:"\u5efa\u7acb\u8fde\u63a5",children:"\u5efa\u7acb\u8fde\u63a5"}),"\n",(0,d.jsxs)(c.p,{children:["\u4e00\u65e6\u63e1\u624b\u6210\u529f\uff0c",(0,d.jsx)(c.code,{children:"\u5ba2\u6237\u7aef"}),"\u548c",(0,d.jsx)(c.code,{children:"\u670d\u52a1\u5668"}),"\u4e4b\u95f4\u5efa\u7acb\u4e86\u6301\u4e45\u7684 ",(0,d.jsx)(c.code,{children:"WebSocket \u8fde\u63a5"}),"\uff0c\u53ef\u4ee5\u8fdb\u884c\u5168\u53cc\u5de5\u901a\u4fe1\u3002"]})]})}function x(e={}){const{wrapper:c}={...(0,r.R)(),...e.components};return c?(0,d.jsx)(c,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},4065:(e,c,n)=>{n.d(c,{A:()=>s});const s=n.p+"assets/images/Snipaste_2024-09-17_13-34-15-6407ce7265f750e560251b6422690cd3.png"},8438:(e,c,n)=>{n.d(c,{R:()=>l,x:()=>i});var s=n(9474);const d={},r=s.createContext(d);function l(e){const c=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(c):{...c,...e}}),[c,e])}function i(e){let c;return c=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),s.createElement(r.Provider,{value:c},e.children)}}}]);